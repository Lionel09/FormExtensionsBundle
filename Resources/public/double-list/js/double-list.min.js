;(function(e,c,g){var d="doubleList",a=c.document,f={};function b(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this._name=d;this._init();}b.prototype={_init:function(){var h=this;this.$widgetContainer=e("#"+this.element.id+"_widget_container");this.$unselectedList=e("#"+this.element.id+"_unselected");this.$selectedList=e("#"+this.element.id+"_selected");this.$unselectedButton=this.$widgetContainer.find(".list-controls .unselect");this.$selectedButton=this.$widgetContainer.find(".list-controls .select");this.$form=this.$widgetContainer.closest("form");this.$unselectedButton.click(function(){h._onUnselect();});this.$widgetContainer.find("ul li a").click(function(i){i.preventDefault();e(this).closest("li").toggleClass("selected");});this.$selectedButton.click(function(){h._onSelect();});this.$form.submit(function(){h._onSubmit();});},_onUnselect:function(){var h=this;e.each(this.$selectedList.children("li"),function(i,j){if(e(j).hasClass("selected")){e(j).removeClass("selected");e(j).appendTo(h.$unselectedList);}});},_onSelect:function(){var h=this;e.each(this.$unselectedList.children("li"),function(i,j){if(e(j).hasClass("selected")){e(j).removeClass("selected");e(j).appendTo(h.$selectedList);}});},_onSubmit:function(){var h=this;e.each(this.$unselectedList.children("li"),function(i,j){var k=e(j).data("value");e(h.element).find('option[value="'+k+'"]').removeAttr("selected");});e.each(this.$selectedList.children("li"),function(i,j){var k=e(j).data("value");e(h.element).find('option[value="'+k+'"]').attr("selected","selected");});}};e.fn[d]=function(i){var h=arguments;if(i===g||typeof i==="object"){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,i));}});}else{if(typeof i==="string"&&i[0]!=="_"&&i!=="init"){var j;this.each(function(){var k=e.data(this,"plugin_"+d);if(k instanceof b&&typeof k[i]==="function"){j=k[i].apply(k,Array.prototype.slice.call(h,1));}if(i==="destroy"){e.data(this,"plugin_"+d,null);}});return j!==g?j:this;}}};}(jQuery,window));